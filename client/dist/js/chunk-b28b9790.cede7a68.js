(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b28b9790"],{"01c0":function(e,t,r){},1174:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.navBarItem,(function(t,n){return r("el-breadcrumb-item",{key:t,attrs:{to:{path:0===n?"/home":""}}},[e._v(e._s(t))])})),1)},a=[],o={props:{navBarItem:Array}},s=o,i=r("2877"),u=Object(i["a"])(s,n,a,!1,null,"aa4f3c02",null);t["a"]=u.exports},"11e9":function(e,t,r){var n=r("52a7"),a=r("4630"),o=r("6821"),s=r("6a99"),i=r("69a8"),u=r("c69a"),c=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(r){}if(i(e,t))return a(!n.f.call(e,t),e[t])}},"4ab5":function(e,t,r){"use strict";r.d(t,"f",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"g",(function(){return i})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"h",(function(){return f}));var n=r("1bab");function a(){return Object(n["a"])({url:"/roles"})}function o(e){return Object(n["a"])({url:"/roles",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/roles/".concat(e)})}function i(e,t){return Object(n["a"])({url:"/roles/".concat(e),method:"put",data:t})}function u(e){return Object(n["a"])({url:"/roles/".concat(e),method:"delete"})}function c(e,t){return Object(n["a"])({url:"/roles/".concat(e,"/rights/").concat(t),method:"delete"})}function l(){return Object(n["a"])({url:"/rights/tree"})}function f(e,t){return Object(n["a"])({url:"/roles/".concat(e,"/rights"),method:"post",data:{rids:t}})}},"5dbc":function(e,t,r){var n=r("d3f4"),a=r("8b97").set;e.exports=function(e,t,r){var o,s=t.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&a&&a(e,o),e}},"7f7f":function(e,t,r){var n=r("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in a||r("9e1e")&&n(a,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},"8b97":function(e,t,r){var n=r("d3f4"),a=r("cb7c"),o=function(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},9093:function(e,t,r){var n=r("ce10"),a=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},9419:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("user-nav-bar",{attrs:{navBarItem:e.navBarItem}}),r("el-card",[r("user-search",{on:{searchUser:e.searchUser,clearInput:e.searchUser}}),r("user-list",{attrs:{userListInfo:e.userListInfo},on:{updateUserList:e.updateUserList}}),r("user-page",{attrs:{totalListCount:e.totalListCount,currentPage:e.queryInfo.pagenum,pagesize:e.queryInfo.pagesize},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),r("add-user-info",{on:{updateUserList:e.updateUserList}}),r("modify-user-info",{on:{updateUserList:e.updateUserList}}),r("allot-role",{on:{updateUserList:e.updateUserList}})],1)},a=[],o=(r("c5f6"),r("96cf"),r("1da1")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{attrs:{gutter:25}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.clearInput},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchClick},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addUserClick}},[e._v("添加用户")])],1)],1)},i=[],u={data:function(){return{input:""}},methods:{searchClick:function(){this.$emit("searchUser",this.input)},clearInput:function(){this.$emit("clearInput",this.input)},addUserClick:function(){this.$bus.$emit("addUserClick")}}},c=u,l=r("2877"),f=Object(l["a"])(c,s,i,!1,null,"27991f4b",null),d=f.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",{attrs:{data:e.userListInfo,border:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"username",label:"用户姓名"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#DCDFE6"},on:{change:function(r){return e.switchClick(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{effect:"dark",content:"编辑用户",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(r){return e.modifyClick(t.row)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"删除用户",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(r){return e.deleteClick(t.row.id)}}})],1),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-s-tools",circle:"",size:"mini"},on:{click:function(r){return e.allotClick(t.row)}}})],1)]}}])})],1)},p=[],b=(r("7f7f"),r("1bab"));function h(e){var t=e.query,r=e.pagenum,n=e.pagesize;return Object(b["a"])({url:"/users",params:{query:t,pagenum:r,pagesize:n}})}function g(e,t){return Object(b["a"])({url:"/users/".concat(e,"/state/").concat(t),method:"put"})}function v(e){var t=e.name,r=e.password,n=e.email,a=e.phone;return Object(b["a"])({url:"/users",method:"post",data:{username:t,password:r,email:n,mobile:a}})}function y(e){var t=e.id,r=e.email,n=e.mobile;return Object(b["a"])({url:"/users/".concat(t),method:"put",data:{email:r,mobile:n}})}function U(e){return Object(b["a"])({url:"/users/".concat(e),method:"delete"})}function _(e){return Object(b["a"])({url:"users/".concat(e)})}function k(e,t){return Object(b["a"])({url:"users/".concat(e,"/role"),method:"put",data:{rid:t}})}var w=r("25b1"),I={props:{userListInfo:Array},methods:{switchClick:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,n=t.mg_state,e.next=3,g(r,n);case 3:Object(w["b"])("用户状态修改成功","success");case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),modifyClick:function(e){this.$bus.$emit("modifyClick",e)},deleteClick:function(e){var t=this;this.$confirm("此操作将永久删除该用户数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",roundButton:!0}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,U(e);case 2:if(n=r.sent,n.data,a=n.meta,400!==a.status&&200==a.status){r.next=7;break}return r.abrupt("return",Object(w["b"])(a.msg||"删除用户操作失败","error"));case 7:t.$emit("updateUserList"),Object(w["b"])("用户删除成功！","success");case 9:case"end":return r.stop()}}),r)})))).catch((function(){return Object(w["b"])("已取消删除操作","info")}))},allotClick:function(e){this.$bus.$emit("allotClick",e)}}},O=I,F=Object(l["a"])(O,m,p,!1,null,"349d12fb",null),x=F.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[3,5,10,20],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalListCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},C=[],$={props:{totalListCount:Number,currentPage:Number,pagesize:Number},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)}}},L=$,R=Object(l["a"])(L,j,C,!1,null,"6ed7461c",null),N=R.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"添加用户信息",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[r("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,"label-width":"auto",rules:e.addUserFormRules}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addUserForm.name,callback:function(t){e.$set(e.addUserForm,"name",t)},expression:"addUserForm.name"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{clearable:"","show-password":""},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"phone"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addUserForm.phone,callback:function(t){e.$set(e.addUserForm,"phone",t)},expression:"addUserForm.phone"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUserInfo}},[e._v("确 定")])],1)],1)},V=[],z={data:function(){return{dialogVisible:!1,addUserForm:{name:"",password:"",email:"",phone:""},addUserFormRules:w["a"]}},mounted:function(){var e=this;this.$bus.$on("addUserClick",(function(){e.dialogVisible=!e.dialogVisible}))},methods:{addUserInfo:function(){var e=this;this.$refs.addUserForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",Object(w["b"])("请填写完整信息","warning"));case 2:return t.next=4,v(e.addUserForm);case 4:if(n=t.sent,n.data,a=n.meta,400!==a.status){t.next=11;break}return t.abrupt("return",Object(w["b"])(a.msg,"error"));case 11:if(201==a.status){t.next=13;break}return t.abrupt("return",Object(w["b"])("添加用户失败","error"));case 13:return e.$emit("updateUserList"),e.dialogVisible=!1,e.$refs.addUserForm.resetFields(),t.abrupt("return",Object(w["b"])("添加用户成功","success"));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},close:function(){this.$refs.addUserForm.resetFields()}}},S=z,A=Object(l["a"])(S,E,V,!1,null,"5aa096b0",null),q=A.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"修改用户信息",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[r("el-form",{ref:"modifyUserForm",attrs:{model:e.modifyUserForm,"label-width":"auto",rules:e.modifyUserFormRules}},[r("el-form-item",{attrs:{label:"用户名称"}},[r("el-input",{attrs:{disabled:""},model:{value:e.modifyUserForm.username,callback:function(t){e.$set(e.modifyUserForm,"username",t)},expression:"modifyUserForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{clearable:""},model:{value:e.modifyUserForm.email,callback:function(t){e.$set(e.modifyUserForm,"email",t)},expression:"modifyUserForm.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{attrs:{clearable:""},model:{value:e.modifyUserForm.mobile,callback:function(t){e.$set(e.modifyUserForm,"mobile",t)},expression:"modifyUserForm.mobile"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.modifyUserInfo}},[e._v("确 定")])],1)],1)},P=[],B={data:function(){return{dialogVisible:!1,modifyUserForm:{username:"",email:"",mobile:""},modifyUserFormRules:w["a"]}},mounted:function(){var e=this;this.$bus.$on("modifyClick",(function(t){e.get_IDUserInfo(t.id).then((function(t){e.dialogVisible=!0,e.modifyUserForm=t})).catch((function(t){Object(w["b"])(t,"warning"),e.dialogVisible=!1}))}))},methods:{modifyUserInfo:function(){var e=this;this.$refs.modifyUserForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",Object(w["b"])("请填写正确的用户数据","warning"));case 2:return t.next=4,y(e.modifyUserForm);case 4:if(n=t.sent,n.data,a=n.meta,200==a.status){t.next=9;break}return t.abrupt("return",Object(w["b"])("编辑用户操作失败","error"));case 9:e.$emit("updateUserList"),e.dialogVisible=!1,e.$refs.modifyUserForm.resetFields(),Object(w["b"])("更新用户数据成功","success");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},close:function(){this.$refs.modifyUserForm.resetFields()},get_IDUserInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:return r=e.sent,n=r.data,a=r.meta,e.abrupt("return",new Promise((function(e,t){200!=a.status?t("要修改的用户可能已被删除，请重新刷新页面"):e(n)})));case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},T=B,M=Object(l["a"])(T,D,P,!1,null,"4d8b461b",null),G=M.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"分配角色",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[r("div",[r("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),r("p",[e._v("当前的角色："+e._s(e.userInfo.role_name))]),r("div",[r("span",[e._v("分配新角色：")]),r("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.roleID,callback:function(t){e.roleID=t},expression:"roleID"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)]),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])},X=[],Y=r("4ab5"),H={data:function(){return{dialogVisible:!1,userInfo:"",roleList:[],roleID:""}},mounted:function(){var e=this;this.$bus.$on("allotClick",(function(t){e.dialogVisible=!0,e.userInfo=t,e.get_RoleList()}))},methods:{confirm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k(this.userInfo.id,this.roleID);case 2:if(t=e.sent,r=t.meta,200==r.status&&400!=r.status){e.next=6;break}return e.abrupt("return",Object(w["b"])(r.msg||"更新角色失败","error"));case 6:this.$emit("updateUserList"),Object(w["b"])("更新角色成功","success"),this.dialogVisible=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.roleID=""},get_RoleList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Y["f"])();case 2:t=e.sent,r=t.data,t.meta,this.roleList=r;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},K=H,Q=(r("d2a6"),Object(l["a"])(K,J,X,!1,null,"17b0fecb",null)),W=Q.exports,Z=r("1174"),ee={components:{UserNavBar:Z["a"],UserSearch:d,UserList:x,UserPage:N,AddUserInfo:q,ModifyUserInfo:G,AllotRole:W},data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:3},userListInfo:[],totalListCount:0,navBarItem:["首页","用户管理","用户列表"]}},mounted:function(){this.get_UserList(this.queryInfo)},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.get_UserList(this.queryInfo)},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.get_UserList(this.queryInfo)},searchUser:function(e){this.queryInfo.query=e,this.get_UserList(this.queryInfo)},updateUserList:function(){this.get_UserList(this.queryInfo)},get_UserList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:if(r=e.sent,n=r.data,a=r.meta,200===a.status){e.next=7;break}return e.abrupt("return",Object(w["b"])("查询用户列表失败","error"));case 7:this.userListInfo=n.users,this.totalListCount=Number(n.total);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},te=ee,re=Object(l["a"])(te,n,a,!1,null,"5799e99c",null);t["default"]=re.exports},aa77:function(e,t,r){var n=r("5ca1"),a=r("be13"),o=r("79e5"),s=r("fdef"),i="["+s+"]",u="​",c=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),f=function(e,t,r){var a={},i=o((function(){return!!s[e]()||u[e]()!=u})),c=a[e]=i?t(d):s[e];r&&(a[r]=c),n(n.P+n.F*i,"String",a)},d=f.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},c5f6:function(e,t,r){"use strict";var n=r("7726"),a=r("69a8"),o=r("2d95"),s=r("5dbc"),i=r("6a99"),u=r("79e5"),c=r("9093").f,l=r("11e9").f,f=r("86cc").f,d=r("aa77").trim,m="Number",p=n[m],b=p,h=p.prototype,g=o(r("2aeb")(h))==m,v="trim"in String.prototype,y=function(e){var t=i(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():d(t,3);var r,n,a,o=t.charCodeAt(0);if(43===o||45===o){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var s,u=t.slice(2),c=0,l=u.length;c<l;c++)if(s=u.charCodeAt(c),s<48||s>a)return NaN;return parseInt(u,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(g?u((function(){h.valueOf.call(r)})):o(r)!=m)?s(new b(y(t)),r,p):y(t)};for(var U,_=r("9e1e")?c(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;_.length>k;k++)a(b,U=_[k])&&!a(p,U)&&f(p,U,l(b,U));p.prototype=h,h.constructor=p,r("2aba")(n,m,p)}},d2a6:function(e,t,r){"use strict";var n=r("01c0"),a=r.n(n);a.a},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-b28b9790.cede7a68.js.map